# Kapsulate Configuration File
# ----------------------------
# This file is used by the `keyd` daemon to map keys.
# Restart keyd for changes to take effect: sudo systemctl restart keyd
#
# Sections:
# - [ids]: Defines which devices this config applies to (* = all)
# - [main]: The base layer. Defines CapsLock behavior.
# - [kap]: The layer active when CapsLock is held.
#
# See `man keyd` for syntax help.

[ids]
*

[main]
# Tap CapsLock for ESC, Hold for 'kap' layer
capslock = overload(kap, esc)

[kap]
# Vim-like navigation
h = left
j = down
k = up
l = right

# Modification
# Holding shift while in kap layer makes selection
shift = layer(kap_shift)

# System & Media
backspace = mute
up = volumeup
down = volumedown
scrollup = volumeup
scrolldown = volumedown

# Integration Triggers (Mapped to synthetic keys for KDE/Python to catch)
# T -> Task Manager (Meta+T is often used, let's use Meta+F13)
t = M-f13
# C -> Color Picker
c = M-f14
# E -> Expand Text
e = M-f15
# P -> Password Gen
p = M-f16

# Text Transforms (Chord leader 'x' - 'k' is taken by 'up')
# Press Caps+X, then...
x = layer(kap_transform)

[kap_shift]
h = S-left
j = S-down
k = S-up
l = S-right

[kap_transform]
# Meta+F20 + Arg is hard to map via simple key, so we use distinct keys
# U -> Upper -> M-f20
u = macro(C-c M-f20)
# L -> Lower -> M-f21
l = macro(C-c M-f21)
# C -> Camel -> M-f22
c = macro(C-c M-f22)
# T -> Title -> M-f23
t = macro(C-c M-f23)
